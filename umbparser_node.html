<script type="text/javascript">
    
    RED.nodes.registerType('umbparser',{
        category: 'parser',
        color: '#a6bbcf',
        defaults: {
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return "UMB parser";
        }
    });
    RED.nodes.registerType('umbgenerator',{
        category: 'function',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
            address: {value:"A001",required:true},
            channels: {value:"100,200",required:true},
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return "UMB umbgenerator";
        },
        oneditprepare: function () {
            const DefaultChannels = new Map(
                [
                    [100, "Temperature"],
                    [200, "Rel. Humidity"],
                    [300, "Air Pressure"],
                    [400, "Wind Speed"],
                    [405, "Wind Speed"],
                    [500, "Wind Direction"],
                    [600, "Precipiation amount"],
                    [601, "Precipiation amount daily"],
                    [700, "Precipiation tpe"],
                    [900, "Global Radiation"],
                    [903, "Illumination"],
                    [904, "Dawn"],
                    [910, "Sun Direction Azimut"],
                    [911, "Sun Direction Elevation"],
                ]
            );
            document.getElementById("node-input-channels").innerHTML = "";
            DefaultChannels.forEach(function (value, key, map) {
                var option = document.createElement("li");
                option.style = "margin: 5px;";
                option.innerHTML += "<input type=\"checkbox\" style=\"width:auto; margin: 2px;\" name=\"channels[]\" value=\"" + key + "\">";
                option.innerHTML +=  "<lable style=\"margin:4px\">" + value + "</lable>";
                document.getElementById("node-input-channels").appendChild(option);
            });

            
            
        }
    });
</script>

<script type="text/html" data-template-name="umbparser">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/html" data-help-name="umbparser">
    <p>This is a parser for UMB frames</p>
</script>

<script type="text/html" data-template-name="umbgenerator" >
    <body>
    <div class="form-row" >
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-address"><i class="icon-tag"></i> Address</label>
        <input type="text" id="node-input-address">
    </div>
    <div class="form-row">
        <label for="node-input-units"><i class="icon-tag"></i> Units</label>
        <select class="node-input-units" onchange="generateChSel()" >
            <option value="metric">metric</option>
            <option value="imperial">imperial</option>
          </select>
    </div>
    <div class="form-row">
            <label for="node-input-channels"><i class="icon-tag"></i> Channels</label>
            <fieldset >
                <ul id="node-input-channels" style="list-style: none; column-count: 2;">
                </ul>
            </fieldset>
    </div>
    </body>
</script>

<script type="text/html" data-help-name="umbgenerator">
    <p>This is a generator for UMB frames</p>
</script>